<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="utf-8" />
    <script src="js/jquery-1.12.4.min.js"></script>
    <script src="js/common.js"></script>
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <title>card game</title>
    <script>
        var colorsArray = ['red', 'blue', 'green', 'yellow'];
        var firstItem = [];
        var secondItem = [];
        var color = 0;
        var cloneColor = 0;
        // var random = Math.floor(Math.random() * colorsArray.length);
        var random; //여기서는 랜덤값을 담을 변수명만 설정.
        
        $(document).ready(function(){
            var $cardsContainer = $('#cardsContainer');
//            var $backColor = $(this).css('background-color');

            $.each(colorsArray, function (idx, val) {
                //colorsArray의 원소 수만큼 반복 실행될때마다 새로운 random 값을 생성하여 colorArray의 index로 활용합니다.
                random = Math.floor(Math.random() * colorsArray.length);
                var $li = $('<li/>', {'style': 'background-color:' + colorsArray[random]});
                $cardsContainer.append($li);
            });

            $.each(colorsArray, function (idx, val) {
                var cardsContainerClone = $cardsContainer.children().eq(idx).clone().addClass('clone');
                $cardsContainer.append(cardsContainerClone);
                $cardsContainer.children().eq(idx).attr('data-color', val).attr('data-cloneColor', val);
                $('.clone').eq(idx).attr('data-color', val).attr('data-cloneColor', val);
//                $cardsContainer.children().attr('data-color', backColor);
//                $('.clone').attr('data-cloneColor', backColor)
            });
            
            $('.cards ul').children().click(function(){
                if (firstItem.length > 0 && firstItem.length < 2) {
                    cloneColor = $(this).attr('data-color');
                    secondItem.push($(this).attr('data-cloneColor'));
                    if (firstItem[0] === secondItem[0]) {
                        $("li[data-color='" + color + "']").css({
                            'display': 'none'
                        });
                        firstItem = [];
                        secondItem = [];
                        
                    }else if (firstItem[0] != secondItem[0]) {
                        $("li[data-color='" + color + "']").css({
                            'opacity': '1'
                        });
                        $("li[data-color='" + cloneColor + "']").css({
                            'opacity': '1'
                        });
                        firstItem = [];
                        secondItem = [];
                    }
                }else if (firstItem.length < 1) {
                    color = $(this).attr('data-color');
                    firstItem.push($(this).attr('data-color'));
                    $(this).css({
                        'opacity': '0.8'
                    });
                }
                console.log(color);
                console.log(cloneColor);
                console.log(firstItem.length);
                console.log(secondItem.length);
            });
        });
    </script>
</head>

<body>
<section>
    <div class="cards">
        <ul id="cardsContainer">
        </ul>
    </div>
</section>
</body>

</html>
